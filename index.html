<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
  <link href="https://fonts.googleapis.com/css2?family=Inter:opsz,wght@14..32,400;14..32,600;14..32,700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: radial-gradient(circle at 30% 50%, #1a4f8b, #0a2f5a, #031a33);
      font-family: 'Inter', sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow-x: hidden;
      padding: 16px;
    }

    /* ===== GELEMBUNG LAUT ===== */
    .bubble-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    
    .bubble {
      position: absolute;
      bottom: -50px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      backdrop-filter: blur(1px);
      box-shadow: 0 0 10px rgba(255,255,255,0.5), inset -3px -3px 8px rgba(255,255,255,0.8);
      animation: naik linear infinite;
      z-index: 1;
    }
    
    .bubble::after {
      content: '';
      position: absolute;
      top: 15%;
      left: 15%;
      width: 20%;
      height: 20%;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 50%;
    }

    @keyframes naik {
      0% { transform: translateY(0) scale(0.8); opacity: 0.7; }
      100% { transform: translateY(-120vh) scale(1.2); opacity: 0; }
    }

    .scene {
      position: relative;
      width: 100%;
      max-width: 550px;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 15;
    }

    .card {
      position: absolute;
      width: 100%;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border-radius: 56px;
      padding: 40px 28px;
      text-align: center;
      border: 2px solid rgba(255, 255, 255, 0.4);
      box-shadow: 0 30px 50px rgba(0, 20, 50, 0.5), 0 0 0 2px rgba(255,255,255,0.2) inset;
      color: #e0f0ff;
      transition: opacity 0.18s ease, transform 0.2s ease;
      opacity: 0;
      transform: scale(0.96) translateY(12px);
      pointer-events: none;
      text-shadow: 0 2px 5px rgba(0,0,0,0.3);
    }

    .card.active {
      opacity: 1;
      transform: scale(1) translateY(0);
      pointer-events: all;
    }

    h2 {
      font-size: 2.4rem;
      font-weight: 700;
      letter-spacing: -0.5px;
      color: #ffffff;
      text-shadow: 0 4px 15px #7fc9ff, 0 2px 5px #00000050;
      margin-bottom: 20px;
      line-height: 1.2;
    }

    p {
      font-size: 1.3rem;
      color: #d4eeff;
      font-weight: 500;
      margin: 16px 0;
      text-shadow: 0 2px 5px #00000030;
    }

    input {
      width: 85%;
      padding: 18px 22px;
      border: none;
      border-radius: 60px;
      background: rgba(255, 255, 255, 0.7);
      box-shadow: 0 8px 16px rgba(0, 10, 30, 0.3), inset 0 2px 6px #ffffff;
      font-size: 1.15rem;
      text-align: center;
      color: #024d8c;
      font-weight: 600;
      outline: 3px solid transparent;
      transition: 0.1s;
      margin: 15px 0 8px;
      backdrop-filter: blur(5px);
    }

    input:focus {
      outline-color: #9fd3ff;
      background: rgba(255, 255, 255, 0.9);
    }

    /* ===== DESAIN TOMBOL ===== */
    button, .puzzle-piece, .click-btn {
      background: linear-gradient(145deg, #7fc9ff, #2f6eb0);
      border: none;
      border-radius: 40px;
      padding: 16px 40px;
      font-size: 1.2rem;
      font-weight: 700;
      color: white;
      box-shadow: 0 10px 0 #0a2f5a, 0 5px 20px rgba(0,0,0,0.4);
      cursor: pointer;
      transition: all 0.08s ease;
      border: 2px solid rgba(255, 255, 255, 0.5);
      text-shadow: 0 2px 0 #00000030;
      margin: 8px 0;
    }

    button:active, .puzzle-piece:active, .click-btn:active {
      transform: translateY(6px);
      box-shadow: 0 4px 0 #0a2f5a, 0 5px 15px rgba(0,0,0,0.4);
    }

    /* ===== PUZZLE MENYATU 3x2 ===== */
    .puzzle-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 20px;
      margin: 20px 0;
    }

    .preview-container {
      width: 100%;
      margin-bottom: 5px;
    }
    
    .puzzle-preview {
      width: 240px;
      height: 160px;
      border-radius: 20px;
      border: 3px solid white;
      box-shadow: 0 10px 20px rgba(0,0,0,0.5);
      margin: 0 auto;
      background-size: cover;
      background-position: center;
      background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&h=400&fit=crop');
      opacity: 0.9;
    }
    
    .preview-label {
      font-size: 0.9rem;
      color: white;
      margin-top: 5px;
      opacity: 0.8;
    }

    .puzzle-pieces {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 2px;
      background: rgba(0,0,0,0.3);
      padding: 10px;
      border-radius: 20px;
      width: fit-content;
      margin: 0 auto;
    }

    .puzzle-piece {
      width: 70px;
      height: 70px;
      background-size: cover;
      background-position: center;
      border-radius: 8px;
      cursor: grab;
      box-shadow: 0 4px 0 #0a2f5a;
      transition: all 0.1s;
      padding: 0;
    }

    .puzzle-piece:active {
      cursor: grabbing;
      transform: scale(0.95);
    }

    .puzzle-slot {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(2, 1fr);
      gap: 0;
      width: 240px;
      height: 160px;
      background: rgba(255,255,255,0.1);
      border: 3px solid white;
      border-radius: 20px;
      overflow: hidden;
      margin: 0 auto;
    }

    .slot {
      background: rgba(255,255,255,0.15);
      border: 1px dashed rgba(255,255,255,0.3);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      transition: all 0.2s;
      width: 100%;
      height: 100%;
      background-size: cover;
      background-position: center;
    }

    .slot.filled {
      border: 2px solid #7fc9ff;
      background-size: cover;
      background-position: center;
    }

    /* ===== CLICK 10x ===== */
    .click-area {
      margin: 30px 0;
      text-align: center;
    }

    .click-counter {
      font-size: 3rem;
      font-weight: 800;
      color: white;
      background: rgba(255,255,255,0.2);
      padding: 10px 30px;
      border-radius: 60px;
      display: inline-block;
      margin-bottom: 20px;
      border: 3px solid white;
    }

    #realBtn {
      background: linear-gradient(145deg, #ffd966, #ffb347);
      box-shadow: 0 10px 0 #b45f06;
      display: none;
    }

    /* Piano minimalis */
    .piano-mini {
      margin: 20px 0 15px;
    }

    .note-display {
      font-size: 5rem;
      font-weight: 800;
      color: #ffffff;
      background: rgba(255, 255, 255, 0.25);
      border-radius: 50px;
      padding: 10px 40px;
      display: inline-block;
      margin-bottom: 20px;
      border: 4px solid rgba(255,255,255,0.6);
      box-shadow: 0 8px 0 #2f6eb0, 0 0 30px #7fc9ff;
      line-height: 1.2;
      min-width: 150px;
    }

    .lyrics-line {
      font-size: 1.4rem;
      background: rgba(255,255,255,0.2);
      padding: 12px 20px;
      border-radius: 60px;
      margin: 15px 0 25px;
      color: #ffffff;
      font-weight: 500;
      border: 2px dashed rgba(255,255,255,0.5);
    }

    .piano-keys {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin: 20px 0 15px;
    }

    .piano-key {
      width: 70px;
      height: 120px;
      background: rgba(255, 255, 255, 0.7);
      border-radius: 25px 25px 15px 15px;
      box-shadow: 0 10px 0 #1f4d8a, 0 5px 15px rgba(0,0,0,0.5);
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      align-items: center;
      padding-bottom: 18px;
      font-size: 2rem;
      font-weight: 700;
      color: #014a8a;
      cursor: pointer;
      transition: 0.06s linear;
      border: 3px solid rgba(255,255,255,0.8);
    }

    .piano-key:active {
      transform: translateY(8px);
      box-shadow: 0 2px 0 #1f4d8a;
    }

    .piano-key.correct {
      background: #b0e9b0cc;
      box-shadow: 0 10px 0 #2e7d32;
    }

    .piano-key.wrong {
      background: #ffb0b0cc;
      box-shadow: 0 10px 0 #c62828;
    }

    #pianoStatus {
      font-size: 1.2rem;
      font-weight: 600;
      margin-top: 20px;
      min-height: 50px;
      background: rgba(255,255,255,0.15);
      padding: 12px 20px;
      border-radius: 60px;
      color: white;
    }

    /* ===== SURAT DENGAN SCROLL ===== */
    .envelope {
      font-size: 150px;
      line-height: 1;
      cursor: pointer;
      filter: drop-shadow(0 22px 18px #1a3f66);
      animation: melayang 2.2s infinite alternate;
      margin: 5px 0 20px;
    }
    
    @keyframes melayang {
      0% { transform: translateY(0); }
      100% { transform: translateY(-14px); }
    }

    /* Container surat dengan scroll */
    .letter-container {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
      margin-top: 20px;
    }

    .letter-container.show {
      max-height: 600px; /* cukup untuk surat panjang */
      overflow-y: auto; /* scroll vertical kalau kepanjangan */
    }

    .letter {
      background: #fffef7;
      background-image: linear-gradient(#f5f0e6 1px, transparent 1px);
      background-size: 100% 32px;
      border-radius: 48px;
      padding: 36px 30px;
      color: #2c3e50;
      text-align: left;
      box-shadow: 0 25px 40px rgba(10, 30, 50, 0.5);
      border: 3px solid #ffffff;
      font-family: 'Inter', 'Georgia', serif;
      line-height: 1.8;
    }
    
    .letter h3 {
      font-size: 2.2rem;
      margin-bottom: 24px;
      color: #1e4b7a;
      text-align: center;
      font-weight: 700;
      letter-spacing: -0.5px;
      text-shadow: 0 2px 4px rgba(255,255,255,0.5);
      border-bottom: 2px dashed #a0c4e2;
      padding-bottom: 16px;
    }
    
    .letter p {
      font-size: 1.2rem;
      color: #1a3f5c;
      margin: 0 0 20px 0;
      line-height: 1.9;
      text-shadow: none;
      font-weight: 450;
      text-align: justify;
    }
    
    .letter .signature {
      display: block;
      margin-top: 32px;
      font-size: 1.4rem;
      font-weight: 600;
      text-align: right;
      color: #0a4b78;
      border-top: 1px solid #bcd9f0;
      padding-top: 20px;
      font-style: italic;
    }
    
    .letter .emoji-decoration {
      text-align: center;
      font-size: 1.8rem;
      margin: 20px 0 10px;
      letter-spacing: 8px;
      opacity: 0.7;
    }

    .confetti {
      position: absolute;
      width: 14px;
      height: 14px;
      background: #b5dcff;
      top: -20px;
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      animation: jatuhBiru linear forwards;
      z-index: 300;
      pointer-events: none;
    }
    
    @keyframes jatuhBiru {
      to { transform: translateY(120vh) rotate(540deg); opacity: 0.3; }
    }

    @keyframes shakeWrong {
      0%,100% { transform: translateX(0); }
      20% { transform: translateX(-10px); }
      40% { transform: translateX(10px); }
      60% { transform: translateX(-5px); }
      80% { transform: translateX(5px); }
    }
    .shake-now { animation: shakeWrong 0.22s; }

    @media (max-width: 480px) {
      .card { padding: 30px 20px; }
      h2 { font-size: 2rem; }
      .piano-key { width: 55px; height: 100px; font-size: 1.5rem; }
      .envelope { font-size: 120px; }
      .note-display { font-size: 4rem; }
      .puzzle-piece { width: 60px; height: 60px; }
      .puzzle-slot { width: 210px; height: 140px; }
      .letter { padding: 25px 18px; }
      .letter p { font-size: 1rem; }
      
      /* Letter container di mobile */
      .letter-container.show {
        max-height: 500px;
      }
    }
  </style>
</head>
<body>

<div class="bubble-container" id="bubbleContainer"></div>

<script>
  (function() {
    // ===== GELEMBUNG OTOMATIS =====
    const container = document.getElementById('bubbleContainer');
    function createBubble() {
      const bubble = document.createElement('div');
      bubble.className = 'bubble';
      const size = Math.random() * 50 + 10;
      bubble.style.width = size + 'px';
      bubble.style.height = size + 'px';
      bubble.style.left = Math.random() * 100 + '%';
      const duration = Math.random() * 10 + 5;
      bubble.style.animationDuration = duration + 's';
      bubble.style.animationDelay = Math.random() * 5 + 's';
      container.appendChild(bubble);
      setTimeout(() => { if (bubble.parentNode) bubble.remove(); }, (duration + 5) * 1000);
    }
    for (let i = 0; i < 30; i++) setTimeout(createBubble, i * 200);
    setInterval(createBubble, 500);
  })();
</script>

<div class="scene">
  <!-- HALAMAN 1 -->
  <div class="card active" id="page1">
    <h2>Selamat Ulang tahun deppal</h2>
    <p>horee udah 18 tahun.</p>
    <button onclick="nextPage(1)">lanjut</button>
  </div>

  <!-- HALAMAN 2: PIANO -->
  <div class="card" id="page2">
    <h2>üéπ Main piano</h2>
    <div class="piano-mini">
      <div class="note-display" id="currentNote">1</div>
      <div class="lyrics-line" id="lyricLine">‚ô™ 1 1 5 5 6 6 5</div>
      <div class="piano-keys">
        <div class="piano-key" data-note="C">1</div>
        <div class="piano-key" data-note="D">2</div>
        <div class="piano-key" data-note="E">3</div>
        <div class="piano-key" data-note="F">4</div>
        <div class="piano-key" data-note="G">5</div>
        <div class="piano-key" data-note="A">6</div>
      </div>
    </div>
    <div id="pianoStatus">not ke-1 dari 34</div>
  </div>

  <!-- HALAMAN 3: PUZZLE MENYATU 3x2 -->
  <div class="card" id="page3">
    <h2>üß© susun gambar</h2>
    <div class="preview-container">
      <div class="puzzle-preview"></div>
      <div class="preview-label">contoh gambar</div>
    </div>
    <div class="puzzle-container">
      <div class="puzzle-pieces" id="puzzlePieces"></div>
      <div class="puzzle-slot" id="puzzleSlots"></div>
    </div>
    <p id="puzzleStatus">Tarik keping ke grid</p>
  </div>

  <!-- HALAMAN 4: PERTANYAAN 1 -->
  <div class="card" id="page4">
    <h2>siapa kesayangan kamu?</h2>
    <input id="a1" placeholder="siapa yah ?" autocomplete="off">
    <button onclick="check1()">jawab</button>
  </div>

  <!-- HALAMAN 5: PERTANYAAN 2 -->
  <div class="card" id="page5">
    <h2>yakin nih?</h2>
    <input id="a2" placeholder="iya / tidak">
    <button onclick="check2()">jawab</button>
  </div>

  <!-- HALAMAN 6: PERTANYAAN 3 -->
  <div class="card" id="page6">
    <h2>Love you üíô</h2>
    <input id="a3" placeholder="mwah mwah">
    <button onclick="check3()">kirim</button>
  </div>

  <!-- HALAMAN 7: CLICK 10x -->
  <div class="card" id="page7">
    <h2>mau lihat pesannya?</h2>
    <div class="click-area">
      <div class="click-counter" id="clickCounter">0/10</div>
      <button class="click-btn" id="clickBtn">iya</button>
      <button class="click-btn" id="realBtn" style="display:none;">‚ú® buka pesan ‚ú®</button>
    </div>
    <p id="clickHint">klik tombol 10x untuk membuka</p>
  </div>

  <!-- HALAMAN 8: SURAT DENGAN SCROLL -->
  <div class="card" id="page8">
    <div class="envelope" onclick="openLetter()">üíå</div>
    <p style="font-size: 1.1rem;">ketuk suratnya</p>
    
    <!-- Container surat dengan scroll -->
    <div class="letter-container" id="letterContainer">
      <div class="letter">
        <h3>Happy birthday Deppal</h3>
        <p>Selamat ulang tahun yang ke-18. Semoga di umur kamu yang sekarang, semua doa baik balik ke kamu berkali-kali lipat. Rezeki lancar, Sehat selalu dan semua mimpi-mimpi kamu pelan-pelan jadi nyata satu per satu.</p>
        
        <p>Bukan cuma karena hari ini ultah kamu, tapi karena kamu selalu ada buat aku, sabar ngadepin aku, dan bikin hari aku lebih berwarna. </p>
        
        <p>Aku minta maaf kalau selama ini masih banyak kurangnya dari aku. Mungkin aku belum bisa jadi yang terbaik buat kamu. Makasih ya tetap bertahan selama ini. </p>
        
        <p>Harapan aku cuma satu: semoga kita sama-sama bisa tumbuh jadi versi terbaik diri kita masing-masing. Saling ngerti, saling jaga, dan tetap milih satu sama lain apa pun keadaannya nanti.</p>
       
        <p><strong>And I still love you, honey üåä</strong></p>
        <p><em>sampai kapan pun, aku harap kita selalu bahagia.</em></p>
        
        <span class="signature">Dari Kayla üíô</span>
      </div>
    </div>
  </div>
</div>

<script>
  (function() {
    // ===== FUNGSI PINDAH HALAMAN =====
    window.nextPage = function(curr) {
      const cur = document.getElementById('page' + curr);
      const next = document.getElementById('page' + (curr + 1));
      if (cur) cur.classList.remove('active');
      if (next) next.classList.add('active');
    };

    // ========== PIANO ==========
    const AudioContext = window.AudioContext || window.webkitAudioContext;
    const audioCtx = new AudioContext();
    
    const notes = { C:261.63, D:293.66, E:329.63, F:349.23, G:392.00, A:440.00 };
    const numberMap = { 'C':'1', 'D':'2', 'E':'3', 'F':'4', 'G':'5', 'A':'6' };
    
    const songNotes = [
      'C','C','G','G','A','A','G',
      'F','F','E','E','D','D','C',
      'G','G','F','F','E','E','D',
      'G','G','F','F','E','E','D',
      'C','C','G','G','A','A','G',
      'F','F','E','E','D','D','C'
    ];
    
    const lyricsLines = [
      "‚ô™ 1 1 5 5 6 6 5",
      "‚ô™ 4 4 3 3 2 2 1",
      "‚ô™ 5 5 4 4 3 3 2",
      "‚ô™ 5 5 4 4 3 3 2",
      "‚ô™ 1 1 5 5 6 6 5",
      "‚ô™ 4 4 3 3 2 2 1"
    ];
    
    let currentIndex = 0;
    const totalNotes = songNotes.length;
    const currentNoteEl = document.getElementById('currentNote');
    const lyricLineEl = document.getElementById('lyricLine');
    const pianoStatusEl = document.getElementById('pianoStatus');
    
    function updatePianoDisplay() {
      if (currentIndex < totalNotes) {
        currentNoteEl.innerText = numberMap[songNotes[currentIndex]];
        const lineIndex = Math.floor(currentIndex / 7);
        lyricLineEl.innerText = lyricsLines[lineIndex] || lyricsLines[0];
        pianoStatusEl.innerText = `not ke-${currentIndex+1} dari ${totalNotes}`;
      } else {
        currentNoteEl.innerText = 'üéâ';
        lyricLineEl.innerText = '‚ô™ selesai!';
        pianoStatusEl.innerText = 'Piano berhasil!';
      }
    }
    
    function playNote(freq) {
      if (audioCtx.state === 'suspended') audioCtx.resume();
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.connect(gain); 
      gain.connect(audioCtx.destination);
      osc.frequency.value = freq;
      gain.gain.setValueAtTime(0.2, audioCtx.currentTime);
      gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.4);
      osc.start(); 
      osc.stop(audioCtx.currentTime + 0.4);
    }
    
    document.querySelectorAll('.piano-key').forEach(key => {
      key.addEventListener('click', function() {
        if (currentIndex >= totalNotes) return;
        
        const note = this.dataset.note;
        playNote(notes[note]);
        
        if (note === songNotes[currentIndex]) {
          this.classList.add('correct');
          setTimeout(() => this.classList.remove('correct'), 200);
          currentIndex++;
          
          if (currentIndex === totalNotes) {
            updatePianoDisplay();
            setTimeout(() => { 
              document.getElementById('page2').classList.remove('active'); 
              document.getElementById('page3').classList.add('active'); 
            }, 600);
          } else {
            updatePianoDisplay();
          }
        } else {
          this.classList.add('wrong');
          setTimeout(() => this.classList.remove('wrong'), 200);
          pianoStatusEl.innerText = `‚ùå coba lagi, tekan not ${numberMap[songNotes[currentIndex]]}`;
        }
      });
    });
    
    updatePianoDisplay();

    // ========== PUZZLE ==========
    const imageUrl = 'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?w=600&h=400&fit=crop';
    
    const piecesDiv = document.getElementById('puzzlePieces');
    const slotsDiv = document.getElementById('puzzleSlots');
    const puzzleStatus = document.getElementById('puzzleStatus');
    let filledSlots = 0;
    
    for (let i = 0; i < 6; i++) {
      const slot = document.createElement('div');
      slot.className = 'slot';
      slot.dataset.slot = i;
      slotsDiv.appendChild(slot);
    }

    const pieceIndices = [0, 1, 2, 3, 4, 5];
    const shuffledOrder = [...pieceIndices].sort(() => Math.random() - 0.5);
    
    function getBackgroundPosition(index) {
      const row = Math.floor(index / 3);
      const col = index % 3;
      const xPos = (col / 2) * 100;
      const yPos = row === 0 ? '0%' : '100%';
      return `${xPos}% ${yPos}`;
    }
    
    shuffledOrder.forEach((pieceIndex) => {
      const piece = document.createElement('div');
      piece.className = 'puzzle-piece';
      piece.style.backgroundImage = `url(${imageUrl})`;
      piece.style.backgroundSize = '300% 200%';
      piece.style.backgroundPosition = getBackgroundPosition(pieceIndex);
      piece.draggable = true;
      piece.dataset.piece = pieceIndex;
      
      piece.addEventListener('dragstart', (e) => {
        e.dataTransfer.setData('text/plain', pieceIndex);
        e.dataTransfer.effectAllowed = 'move';
      });
      
      piecesDiv.appendChild(piece);
    });

    slotsDiv.querySelectorAll('.slot').forEach((slot, index) => {
      slot.addEventListener('dragover', (e) => {
        e.preventDefault();
        e.dataTransfer.dropEffect = 'move';
      });
      
      slot.addEventListener('drop', (e) => {
        e.preventDefault();
        if (slot.classList.contains('filled')) return;
        
        const pieceIndex = parseInt(e.dataTransfer.getData('text/plain'));
        
        let pieceElement = null;
        document.querySelectorAll('.puzzle-piece').forEach(p => {
          if (parseInt(p.dataset.piece) === pieceIndex) {
            pieceElement = p;
          }
        });
        
        if (!pieceElement) return;
        
        if (pieceIndex === index) {
          slot.classList.add('filled');
          slot.style.backgroundImage = `url(${imageUrl})`;
          slot.style.backgroundSize = '300% 200%';
          slot.style.backgroundPosition = getBackgroundPosition(pieceIndex);
          slot.innerText = '';
          filledSlots++;
          
          pieceElement.remove();
          
          if (filledSlots === 6) {
            puzzleStatus.innerText = '‚úÖ Benar! Lanjut ke pertanyaan...';
            setTimeout(() => {
              document.getElementById('page3').classList.remove('active');
              document.getElementById('page4').classList.add('active');
            }, 1000);
          } else {
            puzzleStatus.innerText = `‚úÖ ${filledSlots}/6 benar, lanjutkan`;
          }
        } else {
          puzzleStatus.innerText = '‚ùå Salah posisi, coba lagi';
        }
      });
    });

    // ========== PERTANYAAN ==========
    function shakePage(pageId) {
      const el = document.getElementById(pageId);
      if (el) { 
        el.classList.add('shake-now'); 
        setTimeout(() => el.classList.remove('shake-now'), 220); 
      }
    }
    
    window.check1 = function() {
      const jawab = document.getElementById('a1').value.trim().toLowerCase();
      if (jawab === 'kayla') { 
        nextPage(4); 
      } else { 
        shakePage('page4'); 
      }
    };
    
    window.check2 = function() {
      const jawab = document.getElementById('a2').value.trim().toLowerCase();
      if (jawab === 'iya') { 
        nextPage(5); 
      } else { 
        shakePage('page5'); 
      }
    };
    
    window.check3 = function() {
      const jawab = document.getElementById('a3').value.trim().toLowerCase();
      if (jawab === 'love you too') {   
        document.getElementById('page6').classList.remove('active');
        document.getElementById('page7').classList.add('active');
      } else { 
        shakePage('page6'); 
      }
    };

    // ========== CLICK 10x ==========
    const clickBtn = document.getElementById('clickBtn');
    const realBtn = document.getElementById('realBtn');
    const clickCounter = document.getElementById('clickCounter');
    const clickHint = document.getElementById('clickHint');
    let klikCount = 0;
    
    clickBtn.addEventListener('click', () => {
      if (klikCount >= 10) return;
      klikCount++;
      clickCounter.innerText = klikCount + '/10';
      if (klikCount === 10) {
        realBtn.style.display = 'inline-block';
        clickBtn.style.display = 'none';
      } else {
        clickHint.innerText = `klik lagi (${klikCount}/10)`;
      }
    });
    
    realBtn.addEventListener('click', () => {
      document.getElementById('page7').classList.remove('active');
      document.getElementById('page8').classList.add('active');
    });

    // ========== BUKA SURAT DENGAN SCROLL ==========
    window.openLetter = function() {
      const letterContainer = document.getElementById('letterContainer');
      
      // Kalau belum kebuka, buka
      if (!letterContainer.classList.contains('show')) {
        letterContainer.classList.add('show');
        
        // Tambahin konfeti
        for (let i = 0; i < 60; i++) {
          let k = document.createElement('div');
          k.className = 'confetti';
          k.style.left = Math.random() * 100 + '%';
          k.style.background = ['#8ec9ff', '#b2dcff', '#ffffff', '#63b0ff', '#c1e2ff'][Math.floor(Math.random() * 5)];
          k.style.animationDuration = (Math.random() * 2.2 + 1.8) + 's';
          k.style.width = (Math.random() * 18 + 8) + 'px';
          k.style.height = k.style.width;
          document.body.appendChild(k);
          setTimeout(() => k.remove(), 2800);
        }
      }
    };
  })();
</script>

<!-- cegah enter reload -->
<script>
  document.querySelectorAll('input').forEach(inp => inp.addEventListener('keypress', (e) => { if (e.key === 'Enter') e.preventDefault(); }));
</script>

</body>
</html>
